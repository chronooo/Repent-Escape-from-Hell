------- FILE character_frame_switching_test.s LEVEL 1 PASS 2
      1  1124					      processor	6502
      2  1124 ????
      3  1124 ????						;   KERNAL [sic] routines
      4  1124 ????						;   zero PAGE USage
      5  1124 ????						;   20:current status(idle/left/right + frame/1/2)
      6  1124 ????						; not frame 1: 0
      7  1124 ????						; idle frame 1: 1
      8  1124 ????						; left frame 1: 2
      9  1124 ????						; right frame 1: 3
     10  1124 ????						; memo: 6 bits remaining
     11  1124 ????						;   21: x movement
     12  1124 ????						;   22: y movement
     13  1001					      org	$1001
     14  1001		       0b 10		      dc.w	stubend
     15  1003		       39 30		      dc.w	12345
     16  1005		       9e 34 31 30*	      dc.b	$9e, "4109", 0
     17  100b				   stubend
     18  100b		       00 00		      dc.w	0
     19  100d
     20  100d				   main
     21  100d		       20 e6 10 	      jsr	clear_screen
     22  1010
     23  1010							;start top half location
     24  1010		       a9 e6		      lda	#$e6
     25  1012		       85 21		      sta	$21
     26  1014		       a9 1e		      lda	#$1e
     27  1016		       85 22		      sta	$22
     28  1018		       a9 e6		      lda	#$e6
     29  101a		       85 23		      sta	$23
     30  101c		       a9 96		      lda	#$96
     31  101e		       85 24		      sta	$24
     32  1020
     33  1020
     34  1020				   main_loop
     35  1020
     36  1020		       a5 c5		      lda	$00C5	; loads the current pressed key from memory
     37  1022
     38  1022				   case_fall
     39  1022		       c9 29		      cmp	#41	;if s is presssed "test stage design)
     40  1024		       d0 0f		      bne	case_rise
     41  1026		       a9 79		      lda	#121
     42  1028		       85 00		      sta	$0
     43  102a		       a9 30		      lda	#48
     44  102c		       85 01		      sta	$1
     45  102e		       a9 00		      lda	#0
     46  1030		       85 02		      sta	$2
     47  1032		       4c c5 10 	      jmp	main_loop_finishing
     48  1035				   case_rise
     49  1035		       c9 09		      cmp	#9	;if w is pressed
     50  1037		       d0 0f		      bne	case_left
     51  1039		       a9 78		      lda	#120
     52  103b		       85 00		      sta	$0
     53  103d		       a9 30		      lda	#48
     54  103f		       85 01		      sta	$1
     55  1041		       a9 00		      lda	#0
     56  1043		       85 02		      sta	$2
     57  1045		       4c c5 10 	      jmp	main_loop_finishing
     58  1048				   case_left
     59  1048		       c9 11		      cmp	#17	; if A is pressed
     60  104a		       d0 09		      bne	case_right
     61  104c		       a5 20		      lda	$20
     62  104e		       c9 02		      cmp	#2	;now is in left frame1->switch frame2
     63  1050		       f0 28		      beq	left_f2
     64  1052		       4c 6b 10 	      jmp	left_f1
     65  1055				   case_right
     66  1055		       c9 12		      cmp	#18	; if D is pressed
     67  1057		       d0 09		      bne	case_idle
     68  1059		       a5 20		      lda	$20
     69  105b		       c9 03		      cmp	#3	;now is in left frame1->switch frame2
     70  105d		       f0 39		      beq	right_f2
     71  105f		       4c 89 10 	      jmp	right_f1
     72  1062				   case_idle
     73  1062		       a5 20		      lda	$20
     74  1064		       c9 01		      cmp	#1	;now is in idle frame1->switch frame2
     75  1066		       f0 4e		      beq	idle_f2
     76  1068		       4c a7 10 	      jmp	idle_f1
     77  106b				   left_f1
     78  106b		       a9 73		      lda	#115
     79  106d		       85 00		      sta	$0
     80  106f		       a9 31		      lda	#'1
     81  1071		       85 01		      sta	$1
     82  1073		       a9 02		      lda	#2
     83  1075		       85 02		      sta	$2
     84  1077		       4c c5 10 	      jmp	main_loop_finishing
     85  107a				   left_f2
     86  107a		       a9 74		      lda	#116
     87  107c		       85 00		      sta	$0
     88  107e		       a9 32		      lda	#'2
     89  1080		       85 01		      sta	$1
     90  1082		       a9 00		      lda	#0
     91  1084		       85 02		      sta	$2
     92  1086		       4c c5 10 	      jmp	main_loop_finishing
     93  1089				   right_f1
     94  1089		       a9 6b		      lda	#107
     95  108b		       85 00		      sta	$0
     96  108d		       a9 31		      lda	#'1
     97  108f		       85 01		      sta	$1
     98  1091		       a9 03		      lda	#3
     99  1093		       85 02		      sta	$2
    100  1095		       4c c5 10 	      jmp	main_loop_finishing
    101  1098				   right_f2
    102  1098		       a9 76		      lda	#118
    103  109a		       85 00		      sta	$0
    104  109c		       a9 32		      lda	#'2
    105  109e		       85 01		      sta	$1
    106  10a0		       a9 00		      lda	#0
    107  10a2		       85 02		      sta	$2
    108  10a4		       4c c5 10 	      jmp	main_loop_finishing
    109  10a7				   idle_f1
    110  10a7		       a9 45		      lda	#69
    111  10a9		       85 00		      sta	$0
    112  10ab		       a9 31		      lda	#'1
    113  10ad		       85 01		      sta	$1
    114  10af		       a9 01		      lda	#1
    115  10b1		       85 02		      sta	$2
    116  10b3		       4c c5 10 	      jmp	main_loop_finishing
    117  10b6				   idle_f2
    118  10b6		       a9 46		      lda	#70
    119  10b8		       85 00		      sta	$0
    120  10ba		       a9 32		      lda	#'2
    121  10bc		       85 01		      sta	$1
    122  10be		       a9 00		      lda	#0
    123  10c0		       85 02		      sta	$2
    124  10c2		       4c c5 10 	      jmp	main_loop_finishing
    125  10c5				   main_loop_finishing
    126  10c5		       a5 02		      lda	$2
    127  10c7		       85 20		      sta	$20
    128  10c9							;drawing characters to the location
    129  10c9		       a5 00		      lda	$0
    130  10cb		       a0 00		      ldy	#$0
    131  10cd		       91 21		      sta	($21),y
    132  10cf		       a5 01		      lda	$1
    133  10d1		       a0 16		      ldy	#$16
    134  10d3		       91 21		      sta	($21),y
    135  10d5
    136  10d5							;drawing character with color
    137  10d5		       a9 02		      lda	#$2
    138  10d7		       a0 00		      ldy	#$0
    139  10d9		       91 23		      sta	($23),y
    140  10db		       a0 16		      ldy	#$16
    141  10dd		       91 23		      sta	($23),y
    142  10df		       20 01 11 	      jsr	interval_start
    143  10e2		       4c 20 10 	      jmp	main_loop
    144  10e5				   exit_prg
    145  10e5		       60		      rts
    146  10e6
    147  10e6
    148  10e6							;function:clear screen
    149  10e6				   clear_screen
    150  10e6		       a9 00		      lda	#0
    151  10e8		       a2 00		      ldx	#0
    152  10ea				   clear_char
    153  10ea		       9d 00 1e 	      STA	$1e00,X
    154  10ed		       9d 00 1f 	      STA	$1f00,X
    155  10f0		       e8		      INX
    156  10f1		       d0 f7		      BNE	clear_char
    157  10f3
    158  10f3		       a9 01		      lda	#01
    159  10f5		       a2 00		      ldx	#0
    160  10f7				   white_color
    161  10f7		       9d 00 96 	      STA	$9600,X
    162  10fa		       9d ff 96 	      STA	$96ff,x
    163  10fd		       e8		      INX
    164  10fe		       d0 f7		      BNE	white_color
    165  1100		       60		      rts
    166  1101							;function:clear screen end
    167  1101
    168  1101							;loopoverdelay255
    169  1101				   interval_start
    170  1101		       a9 00		      lda	#$0
    171  1103		       85 11		      sta	$11
    172  1105				   interval_loop
    173  1105		       a5 11		      lda	$11
    174  1107		       c9 0a		      cmp	#$0a
    175  1109		       f0 08		      beq	interval_done
    176  110b		       e6 11		      inc	$11
    177  110d		       20 14 11 	      jsr	delay255_start
    178  1110		       4c 05 11 	      jmp	interval_loop
    179  1113				   interval_done
    180  1113		       60		      rts
    181  1114
    182  1114							;delay loop
    183  1114				   delay255_start
    184  1114		       a9 00		      lda	#$0
    185  1116		       85 01		      sta	$01
    186  1118				   delay255_loop
    187  1118		       a5 01		      lda	$01
    188  111a		       c9 ff		      cmp	#$FF
    189  111c		       f0 05		      beq	delay255_done
    190  111e		       e6 01		      inc	$01
    191  1120		       4c 18 11 	      jmp	delay255_loop
    192  1123				   delay255_done
    193  1123		       60		      rts
    194  1124
    195  1124							;include "shift_on_monitor.s"
    196  1124							;include "tempChars.s"
